<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>test</title>
		<script type="text/javascript" src="./js/sha256.js"></script>
		<script type="text/javascript" src="./js/md5.js"></script>
	</head>
	<body>

	<p id="demo">点击按钮获取</p>
	<button onclick="myFunction()">点我</button>
	<script>
		window.onload=function(){
			testA();
		}
		
		function myFunction(){
			var zstr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
			var d = new Date();
			var x = document.getElementById("demo");
			var cvl=ecd2Str(d.getTime(),zstr);
			x.innerHTML=d.getTime()+", "+cvl+", "+dcd2Num("000"+cvl,0,zstr);
			
			console.log(d.getTime());
			console.log(strCharactCode("PasswordTextaaa",32));
			
			console.log(d.getTime());
			console.log(strCharactCode("Password123456111134561111111111111345611111345611111345611111111111134561113456111111113456111111134561111111111113456113456111111111111111113456111111111111111134561111345611111111111113456111111111111345611111345611111111111134561111111111111134561111111111113456111111111111111111345611111111111111111111111113456111111111111111111111345611111111111111111111111aaaaaaaaaaaaaaaaaa"));
			console.log(strCharactCode("Password123456111134561111111111111345611111345611111345611111111111134561113456111111113456111111134561111111111113456113456111111111111111113456111111111111111134561111345611111111111113456111111111111345611111345611111111111134561111111111111134561111111111113456111111111111111111345611111111111111111111111113456111111111111111111111345611111111111111111111111aaaaaaaaaaaaaaaaab"));
			console.log(strCharactCode("Password12345612222222222222222222222222222222222222222222222222222222222222222222222222222222222222bbbbbbbbbbbbbbbbbbb"));
			console.log(strCharactCode("Password123456123"));
			console.log(strCharactCode("password123456123"));
			console.log(strCharactCode("password123456122"));
			
			console.log(d.getTime());
			var estr=ecpt("{{hello world!的方法士大夫%%发挥更好发挥。，“‘}}","PasswordText111");
			console.log(estr);
			console.log(dcpt(estr,"PasswordText111"));
			
		}

		function ecpt(s,p,n){
            var fxn=n?n:3;
			p=p?p:"";
			var z=strCharactCode(p);
			var r="";
			for(var i=0,j=0;i<s.length;i++,j++){
				if(j==16)j=0;
				var itm=s.charCodeAt(i)+z.charCodeAt(j);
				r+=pfxChar(ecd2Str(itm,z),fxn,z.charAt(0));
			}
			return r;
		}
		function dcpt(s,p,n){
            var fxn=n?n:3;
			p=p?p:"";
			var z=strCharactCode(p);
			var r="";
			for(var i=0,j=0;i<s.length;i+=fxn,j++){
				if(j==16)j=0;
				var itm=s.substring(i,i+fxn);
				r+=String.fromCharCode(dcd2Num(itm,0,z)-z.charCodeAt(j));
			}
			return r;
		}
		
		function ecd2Str(o,z){
			var a = Math.floor(o/z.length);
			var b = o%z.length;
			var c = z.charAt(b);
			var r = "";
			if (a > 0)
				r=ecd2Str(a,z);
			return r + c;
		}
		function dcd2Num(s,t,z){
			if(!t)t=0;
			if(t>s.length-1)return 0;
			var a=s.charAt(s.length-t-1);
			var b=z.indexOf(a);
			return b*Math.pow(z.length,t)+dcd2Num(s,t+1,z);
		}
		function strCharactCode(s,l){
			var z="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");
			var len=z.length;
			var lpn=s.length+len*3;
			for(var i=0,j=0,k=0;i<lpn;i++,j++,k++){
				if(j==len)j=0;
				if(k==s.length)k=0;
				var itm;
				if(i>s.length){//magnify the difference
					z.unshift(z.pop());
					itm=z[j].charCodeAt(0);
				}else{//capture feature
					itm=s.charCodeAt(k);
				}
				var md=itm%len;
				z.unshift(z.splice(md,1)[0]);
				z.push(z.splice(md,1)[0]);
			}
			var r=z.join("");
			return l?r.substr(0,l):r;
		}
		function pfxChar(s,l,n){
			if(s.length<l)return pfxChar((n?n:"0")+s,l,n);
			return s;
		}
		
		function getRdmMac(sep){
			var adrArray = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F" ];
			var adrStr = "";
			for(var i=0;i<12;i++){
			   var indx;
			   if(i!=1){
				   indx=parseInt(Math.random()*16);
			   }else{
				   var sarr=[ 0, 2, 4, 6, 8, 10, 12, 14 ];
				   indx=sarr[parseInt(Math.random()*8)]; 
			   }
			   if(i>0&&i%2==0)adrStr+=sep?sep:"-";
			   adrStr+=adrArray[indx];
			}
			return adrStr
		}
		function randomCode(len,f){
			if(len<1)return "";
			var a=f?f-1:parseInt(Math.random()*3);
			var b=[48,65,97,58,91,123];
			var c=parseInt(Math.random()*(b[a+3]-b[a]));
			return String.fromCharCode(b[a]+c)+randomCode(len-1);
		}
		
		function testA(){
			var str="";
			for(var i=0;i<10;i++){
				str+=(i>0?"\n":"")+getRdmMac();
			}
			console.log(str);
			
		}
		/**
		public static String charVal(double o){
			double a = Math.floor(o/62);
			int b = (int)Math.floor(o%62);
			char ch=(char)(b<10?b+48:(b>35?b+61:b+55));
			char[] chs=new char[]{ch};
			String c = new String(chs);
			String r = "";
			if (a > 0)
				r=charVal(a);
			return r + c;
		}
		
		public static double numVal(String s,int t){
			if(t>s.length()-1)return 0;
			int a=s.charAt(s.length()-t-1);
			int b=a<65?a-48:(a<97?a-55:a-61);
			return b*Math.pow(62,t)+numVal(s,t+1);
		}
		
		public static void main(String[] args) {
			java.util.Date dt = new java.util.Date();
			System.out.println(dt.getTime());
			String s = charVal(dt.getTime());
			System.out.println(s);
			double n = numVal(s,0);
			System.out.println(new DecimalFormat("#").format(n));
		}
		**/
	</script>

	</body>
</html>