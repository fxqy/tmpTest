<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>test</title>
</head>
<body>

<p id="demo">点击按钮获取</p>
<button onclick="myFunction()">点我</button>
<script>
	function myFunction(){
		var d = new Date();
		var x = document.getElementById("demo");
		//var cvl=charVal(1572939906266);
		//x.innerHTML=1572939906266+": "+cvl+","+numVal("0000RgvvY0A");
		//x.innerHTML=pfxChar("45rs",5);
		var estr=ecpt("{{hello world!的方法士大夫%%发挥更好发挥。，“‘：}}","password");
		console.log(estr);
		console.log(dcpt(estr,"password"));
	}
	
	function ecpt(s,p){
		var fxn=3;
	    var len=s.length;
		var r="";
	    for(var i=0,j=0;i<len;i++,j++){
			if(p&&j==p.length)j=0;
	        var itm=s.charCodeAt(i)+(p?p.charCodeAt(j):0);
	        r+=pfxChar(charVal(itm),fxn);
	    }
		return r;
	}
	function dcpt(s,p){
		var fxn=3;
		var len=s.length;
		var r="";
	    for(var i=0,j=0;i<len;i+=fxn,j++){
			if(p&&j==p.length)j=0;
	        var itm=s.substring(i,i+fxn);
	        r+=String.fromCharCode(numVal(itm)-(p?p.charCodeAt(j):0));
	    }
		return r;
	}
	function charVal(o){
		var a = Math.floor(o/62);
		var b = o%62;
		var c = String.fromCharCode(b<10?b+48:(b>35?b+61:b+55));
		var r = "";
		if (a > 0)
			r=charVal(a);
		return r + c;
	}
	function numVal(s,t){
		if(!t)t=0;
		if(t>s.length-1)return 0;
		var a=s.charCodeAt(s.length-t-1);
		var b=a<65?a-48:(a<97?a-55:a-61);
		return b*Math.pow(62,t)+numVal(s,t+1);
	}
	function pfxChar(s,l){
		if(s.length<l)return pfxChar("0"+s,l);
		return s;
	}
</script>

</body>
</html>