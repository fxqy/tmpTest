<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>string code test</title>
		<!-- <script type="text/javascript" src="./js/**.js"></script> -->
	</head>
	<body>
	<p id="demo"></p>
	<button onclick="myfun()">点我</button>
    <hr style="background-color:#ddd;height: 1px;width:100%;border: none;"/>
    
    <p id="demo">
        <textarea id="cttxt" style="resize:none;width:49%;height:40px;margin-top:5px;line-height:40px;font-size:20px;" placeholder="text"></textarea>
        <textarea id="ctmtx" style="resize:none;width:49%;height:40px;margin-top:5px;line-height:40px;font-size:20px;" placeholder="timeText"></textarea>
    </p>
	<button onclick="currtm()">Current</button><button onclick="cvt2tm()" style="margin-left:5px;">>>></button><button onclick="cvtm2t()" style="margin-left:5px;"><<<</button>
    <hr style="background-color:#ddd;height: 1px;width:100%;border: none;"/>
    
	<p id="demo1"></p>
    <button onclick="genMac()">genMac</button>
    <hr style="background-color:#ddd;height: 1px;width:100%;border: none;"/>
    
    <p id="demo2"></p>
    <p id="demo3"></p>
    <button onclick="genMac1()">genMac1</button>
    <hr style="background-color:#ddd;height: 1px;width:100%;border: none;"/>
    
	<script>
        var $Zstr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
		window.onload=function(){
            myfun();
			genMac();
            genMac1();
            
            var arr=str2arr("qmzZPA的风格的士速递防守打高合金钢猴急≈≡≠＝﹦≒≌≤≥＜⅞¾⅔■￠▧✔￠￡￥₱₰№〒〓¿");
            console.log(arr);
            var sa=arr2str(arr);
            console.log(sa);
		}
		
		function myfun(){
			var zstr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
			var d = new Date();
			var x = document.getElementById("demo");
			var cvl=ecd2Str(d.getTime(),zstr);
			var ftc=zstr.charAt(0);
			var prx=ftc+ftc+ftc;
			x.innerHTML=d.getTime()+", "+cvl+", "+dcd2Num(prx+cvl,0,zstr)+"<br/>"+randomCode(15)+"<br/>"+randomCode(15)+"<br/>"+randomCode(15);
			
			console.log(d.getTime());
			console.log(strCharactCode("passwordTextaaa",32));
			
			console.log(d.getTime());
			console.log(strCharactCode("Password123456111134561111111111111345611111345611111345611111111111134561113456111111113456111111134561111111111113456113456111111111111111113456111111111111111134561111345611111111111113456111111111111345611111345611111111111134561111111111111134561111111111113456111111111111111111345611111111111111111111111113456111111111111111111111345611111111111111111111111aaaaaaaaaaaaaaaaaa"));
			console.log(strCharactCode("Password123456111134561111111111111345611111345611111345611111111111134561113456111111113456111111134561111111111113456113456111111111111111113456111111111111111134561111345611111111111113456111111111111345611111345611111111111134561111111111111134561111111111113456111111111111111111345611111111111111111111111113456111111111111111111111345611111111111111111111111aaaaaaaaaaaaaaaaab"));
			console.log(strCharactCode("Password12345612222222222222222222222222222222222222222222222222222222222222222222222222222222222222bbbbbbbbbbbbbbbbbbb"));
			console.log(strCharactCode("Password123456123"));
			console.log(strCharactCode("password123456123"));
			console.log(strCharactCode("password123456122"));
			
			console.log(d.getTime());
			var estr=ecpt("{{hello world!的方法士大夫%%发挥更好发挥。，“‘}}","PasswordText111");
			console.log(estr);
			console.log(dcpt(estr,"PasswordText111"));

		}
        function currtm(){
            var a = document.getElementById("cttxt");
            var b = document.getElementById("ctmtx");
            var dt = new Date();
            dt.setMilliseconds(0);
            a.value=ecd2Str(dt.getTime(),$Zstr);
            cvt2tm();
        }
        function cvt2tm(){
            var a = document.getElementById("cttxt");
            var b = document.getElementById("ctmtx");
            var c=dcd2Num(a.value,0,$Zstr);
            var dt=new Date();
            dt.setTime(c);
            dt.setMilliseconds(0);
            b.value=dt.getFullYear()+"-"+pzero(dt.getMonth()+1)+"-"+pzero(dt.getDate())+" "+pzero(dt.getHours())+":"+pzero(dt.getMinutes())+":"+pzero(dt.getSeconds());
        }        
        function cvtm2t(){
            var a = document.getElementById("cttxt");
            var b = document.getElementById("ctmtx");
            var reg = new RegExp("(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d) (\\d\\d):(\\d\\d):(\\d\\d)","g");
            var rzt = reg.exec(b.value);
            var dt=new Date();
            dt.setFullYear(parseInt(rzt[1]));
            dt.setMonth(parseInt(rzt[2])-1);
            dt.setDate(parseInt(rzt[3]));
            dt.setHours(parseInt(rzt[4]));
            dt.setMinutes(parseInt(rzt[5]));
            dt.setSeconds(parseInt(rzt[6]));
            dt.setMilliseconds(0);
            a.value=ecd2Str(dt.getTime(),$Zstr);
        }
        
        function pzero(nm){
            nm=""+nm;
            if(nm.length<2)return "0"+nm;
            return nm;
        }
		/**
		*Encryption
		* s string
		* p password
		* n number of encryption chars
		*/
		function ecpt(s,p,n){
            var fxn=n?n:3;
			p=p?p:"";
			var z=strCharactCode(p);
			var r="";
			for(var i=0,j=0;i<s.length;i++,j++){
				if(j==17)j=0;
				var itm=s.charCodeAt(i)+z.charCodeAt(j);
				r+=pfxChar(ecd2Str(itm,z),fxn,z.charAt(0));
			}
			return r;
		}
		/**
		*Decryption
		* s encrypted string
		* p password
		* n number of encryption chars
		*/
		function dcpt(s,p,n){
            var fxn=n?n:3;
			p=p?p:"";
			var z=strCharactCode(p);
			var r="";
			for(var i=0,j=0;i<s.length;i+=fxn,j++){
				if(j==17)j=0;
				var itm=s.substring(i,i+fxn);
				r+=String.fromCharCode(dcd2Num(itm,0,z)-z.charCodeAt(j));
			}
			return r;
		}
		/**
		*Encode number to string
		* o number will be encode
		* list of encode char
		*/
		function ecd2Str(o,z){
			var a = Math.floor(o/z.length);
			var b = o%z.length;
			var c = z.charAt(b);
			var r = "";
			if (a > 0)
				r=ecd2Str(a,z);
			return r + c;
		}
		/**
		*Decode string to number
		* o number will be encode
		* list of encode char
		*/
		function dcd2Num(s,t,z){
			if(!t)t=0;
			if(t>s.length-1)return 0;
			var a=s.charAt(s.length-t-1);
			var b=z.indexOf(a);
			return b*Math.pow(z.length,t)+dcd2Num(s,t+1,z);
		}
		/**
		*String eigenvalue
		*/
        function strCharactCode(s,l){
            var z="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
            var lnz=z.length;
            var lns=s.length;
            var lpn=lns+lnz;
            for(var i=0,j=0,k=0;i<lpn;i++){
                var it;
                if(i>lns-1){//Magnify the difference
                    it=z.charCodeAt(j);
                    j++;
                }else{//Capture feature
                    it=s.charCodeAt(k);
                    k++;
                }
                var m=it*(it>>3)%lnz;
                z=z.substring(m+1,lnz)+z.charAt(m)+z.substring(0,m);
            }
            return l?z.substring(0,l):z;
        }
		/**
		* prefix CHar
		*/
		function pfxChar(s,l,n){
			if(s.length<l)return pfxChar((n?n:"0")+s,l,n);
			return s;
		}
		
		function getRdmMac(sep,bol){
			var arr = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F" ];
            if(bol){
                arr[10]='a';arr[11]='b';arr[12]='c';arr[13]='d';arr[14]='e';arr[15]='f';
            }
			var adrStr = "";
			for(var i=0;i<12;i++){
			   var indx;
			   if(i!=1){
				   indx=parseInt(Math.random()*16);
			   }else{
				   var sarr=[ 0, 2, 4, 6, 8, 10, 12, 14 ];
				   indx=sarr[parseInt(Math.random()*8)]; 
			   }
			   if(i>0&&i%2==0)adrStr+=sep;
			   adrStr+=arr[indx];
			}
			return adrStr
		}
		function randomCode(len,f){
			if(len<1)return "";
			var a=f?f-1:parseInt(Math.random()*3);
			var b=[48,65,97,58,91,123];
			var c=parseInt(Math.random()*(b[a+3]-b[a]));
			return String.fromCharCode(b[a]+c)+randomCode(len-1);
		}
		
		function genMac(){
			var str="";
			for(var i=0;i<10;i++){
				str+="<br/>"+getRdmMac("-");
			}
            document.getElementById("demo1").innerHTML=str;

			
		}
        
        function genMac1(){
			var str="";
			for(var i=0;i<10;i++){
                str+="<br/>ifconfig wlan0 hw ether "+getRdmMac("",1);
			}
            document.getElementById("demo3").innerHTML="ifconfig -a<br/>ifconfig wlan0 down <br/>"+str+"<br/><br/>ifconfig wlan0 up<br/>";

		}

		function str2arr(str){
            var arr=[];
            for(var i=0; i<str.length; i++){
				var it=str.charCodeAt(i);
                arr.push(it>>8&0xff);
                arr.push(it&0xff);
			}
			return arr;
		}

		function arr2str(arr){
            var sa='';
            for(var i=0; i<arr.length;i+=2){
                var it=arr[i];
                sa+=String.fromCharCode(it<<8|arr[i+1])
            }
			return sa;
		}

	</script>

	</body>
</html>