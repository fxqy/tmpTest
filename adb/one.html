<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" /> 
	<title></title>
	<style type="text/css">
		body{user-select: none;}
		.ser-inpt{
			width:75%;
			margin:10px 0px 10px 12.5%;
			height:42px;
			text-indent:30px;
			border:1px solid #DAEEFD;
			border-radius:25px;
			color:#999;
		}
		.ser-inpt:focus{
			outline: none;
			border:1px solid #DAEEFD;
			box-shadow: 0px 0px 1px 1px #DAEEFD inset;
		}
		.exp-text{
			border:1px solid #DAEEFD;
			border-radius:4px;
		}
		.exp-text:focus{
			outline: none;
			border:1px solid #DAEEFD;
			box-shadow: 0px 0px 1px 1px #DAEEFD inset;
		}
		.nav-item{
			width:56px;
			display:inline-block;
			text-decoration:none;
			white-space:nowrap;
			text-align:center;
			border-radius:5px;
			margin:6px;
			padding:12px 0;
			color:#415065;
			font-size: 12px;
			border: 1px solid #eee;
			border-color: rgba(125,125,125,0.2) rgba(125,125,125,0.2) rgba(125,125,125,0.2);
		}
		.btn {
			text-decoration: none;
			display: inline-block;
			padding: 4px 11px;
			margin-bottom: 0;
			font-size: 14px;
			line-height: 20px;
			color: #555;
			text-align: center;
			text-decoration:none;
			float:none;
			text-shadow: 0 1px 1px rgba(255,255,255,0.75);
			vertical-align: middle;
			cursor: pointer;
			background-color: #f5f5f5;
			background-image: -moz-linear-gradient(top,#fff,#e6e6e6);
			background-image: -webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));
			background-image: -webkit-linear-gradient(top,#fff,#e6e6e6);
			background-image: -o-linear-gradient(top,#fff,#e6e6e6);
			background-image: linear-gradient(to bottom,#fff,#e6e6e6);
			background-repeat: repeat-x;
			border: 1px solid #bbb;
			border-color: #e6e6e6 #e6e6e6 #bfbfbf;
			border-color: rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);
			border-bottom-color: #a2a2a2;
			-webkit-border-radius: 4px;
			-moz-border-radius: 4px;
			border-radius: 4px;
			-webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
			-moz-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
			box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
			font-family:Microsoft Yahei,Heiti,arial,helvetica,sans-serif,SimHei;
		}
		.btn-comb{
			display:inline-block;
			letter-spacing:-5px;
			word-spacing:0px;
			white-space:nowrap;
		}
		.btn-combLeft{
			padding: 6px 10px;
			border-top-left-radius:4px;
			border-top-right-radius:0px;
			border-bottom-left-radius:4px;
			border-bottom-right-radius:0px;
			border-width: thin 0px thin thin;
			letter-spacing:1px;
			word-spacing:1px;
		}
		.btn-combMidd{
			padding: 6px 10px;
			border-top-left-radius:0px;
			border-top-right-radius:0px;
			border-bottom-left-radius:0px;
			border-bottom-right-radius:0px;
			letter-spacing:1px;
			word-spacing:1px;
		}
		.btn-combRight{
			padding: 6px 10px;
			border-top-left-radius:0px;
			border-top-right-radius:4px;
			border-bottom-left-radius:0px;
			border-bottom-right-radius:4px;
			border-width: thin thin thin 0px;
			letter-spacing:1px;
			word-spacing:1px;
		}
	</style>
	<!--script src="./adds.js" type="text/javascript"></script-->
	<script type="text/javascript">
		var urls=[
			{name:"搜狐",url:"http://m.sohu.com"},
			{name:"环球",url:"http://m.huanqiu.com"},
			{name:"凤凰",url:"http://i.ifeng.com"},
			{name:"央视",url:"http://m.cctv.com"},
			{name:"网易",url:"http://3g.163.com"},
			{name:"人民",url:"http://m.people.cn"},
			{name:"头条",url:"http://m.toutiao.com"},
			{name:"一点资讯",url:"http://www.yidianzixun.com/#/"}
		];
		var colors=["#DAEEFD","#F3F8F1","#E3F9FD","#E9F1F6","#FCEFE8","#DFF0D8","#FCF8E3","#D2DEFA","#FEEFFC"];
		var nals=["360搜索","bing搜索","头条搜索","百度搜索","google搜索"];
		var uals=["http://m.so.com/s","http://cn.bing.com/search","http://toutiao.eastday.com/search.html","http://m.baidu.com/s","https://www.google.com/search"];
		var qals=["q","q","kw","wd","q"];
		function $P(e){return document.querySelectorAll(e);}
		function $G(e){return document.getElementById(e);}
		function $C(a) {return document.createElement(a);}
		function $A(b,a) {a.appendChild(b);}
		function openUrl(u){
			window.open(u);
		}
		function getRenColor(ind){
			var c;
			if(ind<colors.length) c=colors[ind];
			else c=colors[ind%colors.length];
			return c;
		}
		function getStorage(key) {
			if(localStorage&&localStorage.getItem(key)){
				return localStorage.getItem(key);
			}
			return "";
		}
		function getStorageInt(key) {
			return parseInt(getStorage(key));
		}
		function setStorage(key, value) {
			if(localStorage){
				localStorage.setItem(key,value);
			}
		}
		function initLinks(){
			wht=document.documentElement.clientHeight;
			wwt=document.documentElement.clientWidth;
			var bdh=wht/2;
			var ser=$G("ser_ctn");
			serp=bdh-70;
			var serp1=getStorageInt("serp");
			if(serp1)serp=serp1;
			ser.style.top=serp+"px";
			var serw1=getStorageInt("serw");
			if(serw1){
				serw=serw1;
				setStyleVal("serw",serw1,1);
			}
			var ctn=$G("nav_ctn");
			ctn.innerHTML="";
			lnka=bdh-10;
			var lnka1=getStorageInt("lnka");
			if(lnka1)lnka=lnka1;
			ctn.style.height=lnka+"px";
			var lnkb1=getStorageInt("lnkb");
			if(lnkb1){
				lnkb=lnkb1;
				setStyleVal("lnkb",lnkb,1);
			}
			lnkv=bdh;
			var lnkv1=getStorageInt("lnkv");
			if(lnkv1)lnkv=lnkv1;
			ctn.style.top=lnkv+"px";
			var lnkw1=getStorageInt("lnkw");
			var lnkf1=getStorageInt("lnkf");
			var lnkh1=getStorageInt("lnkh");
			var lnkm1=getStorageInt("lnkm");
			var lnkr1=getStorageInt("lnkr");
			if(lnkw1){
				lnkw=lnkw1;
			}
			if(lnkf1){
				lnkf=lnkf1;
			}
			if(lnkh1){
				lnkh=lnkh1;
				ctn.style.margin="0 "+lnkh+"%";
			}
			if(lnkm1){
				lnkm=lnkm1;
			}			
			if(lnkr1){
				lnkr=lnkr1;
			}
			var urls1=getStorage("urls");
			if(urls1){
				urls=JSON.parse(urls1);
			}
			for(var i=0,len=urls.length;i<len;i++){
				var it=urls[i];
				var itm=$C("a");
				itm.className="nav-item";
				itm.innerHTML=it.name;
				itm.style.width=lnkw+"px";
				itm.style.fontSize=lnkf+"px";
				itm.style.margin=lnkm+"px";
				itm.style.borderRadius=lnkr+"px";
				itm.setAttribute("onclick","openUrl('"+it.url+"')");
				itm.style.backgroundColor=getRenColor(i);
				$A(itm,ctn);
			}
		}
		var lti=0,pti=0;
		var serzval="";
		function initEvents(){
			document.addEventListener('touchstart',function(){
				lti=setTimeout(function(){
					lti=0;
					$G("ope_ctn").style.display="block";
				},1000);
			}, false);
			document.addEventListener('touchend',function(){
				if(lti!=0){
					$G("ope_ctn").style.display="none";
					clearTimeout(lti);
				}
			}, false);
			$G("ope_ctn").addEventListener('touchend',function(e){
				e.stopPropagation();
			}, false);
			
			var serin=$G("ser-inpt");
			serin.onclick=function(e) {
				if(e.offsetX<30){
					if(this.value)serzval=this.value;
					this.value="";
					xind++;
					if(xind>qals.length-1)xind=0;
					this.setAttribute("name",qals[xind]);
					this.setAttribute("placeholder",nals[xind]);
					this.parentNode.setAttribute("action",uals[xind]);
					setStorage("xind",xind);
					e.preventDefault();
					var thiz=this;
					if(pti!=0)clearTimeout(pti);
					pti = setTimeout(function(){pti=0;thiz.value=serzval;thiz.setAttribute("placeholder","");},1000);
				}				
			};
			var xind1=getStorageInt("xind");
			if(xind1){
				xind=xind1;
				serin.setAttribute("name",qals[xind]);
				serin.setAttribute("placeholder","");
				serin.parentNode.setAttribute("action",uals[xind]);
			}
			
		}	
		function onChangeStyle(type,val){
			setStyleVal(type,val);
		}
		function setStyleVal(type,val,flag){
			switch(type){
				case "serw":
					if(flag){
						serw=val;
					}else{
						if(serw<50)serw=50;
						else if(serw>90)serw=90;
						else serw+=val;
						setStorage("serw",serw);
					}
					var ele=$G("ser-inpt");
					ele.style.width=serw+"%";
					ele.style.margin="10px 0px 10px "+((100-serw)/2)+"%";
					break;
				case "serp":
					if(flag){
						serp=val;
					}else{
						if(serp<0)serp=0;
						else if(serp>wht)serp=wht;
						else serp+=val;
						setStorage("serp",serp);
					}
					var ele=$G("ser_ctn");
					ele.style.top=serp+"px";
					break;
				case "lnkw":
					if(flag){
						lnkw=val;
					}else{
						if(lnkw<50)lnkw=50;
						else if(lnkw>wwt)lnkw=wwt;
						else lnkw+=val;
						setStorage("lnkw",lnkw);
					}
					var eles=$P("#nav_ctn>.nav-item");
					for(var i=0,len=eles.length;i<len;i++){
						var it=eles[i];
						it.style.width=lnkw+"px";
					}
					break;				
				case "lnkf":
					if(flag){
						lnkf=val;
					}else{
						if(lnkf<10)lnkf=10;
						else if(lnkf>20)lnkf=20;
						else lnkf+=val;
						setStorage("lnkf",lnkf);
					}
					var eles=$P("#nav_ctn .nav-item");
					for(var i=0,len=eles.length;i<len;i++){
						var it=eles[i];
						it.style.fontSize=lnkf+"px";
					}
					break;
				case "lnkv":
					if(flag){
						lnkv=val;
					}else{
						if(lnkv<0)lnkv=0;
						else if(lnkv>wht)lnkv=wht;
						else lnkv+=val;
						setStorage("lnkv",lnkv);
					}
					var ele=$G("nav_ctn");
					ele.style.top=lnkv+"px";
					break;				
				case "lnkh":
					if(flag){
						lnkh=val;
					}else{
						if(lnkh<0)lnkh=0;
						else if(lnkh>50)lnkh=50;
						else lnkh+=val;
						setStorage("lnkh",lnkh);
					}
					console.log(lnkh);
					var ele=$G("nav_ctn");
					ele.style.margin="0px 0px 0px "+lnkh+"%";
					break;
				case "lnkm":
					if(flag){
						lnkm=val;
					}else{
						if(lnkm<4)lnkm=4;
						else if(lnkm>26)lnkm=26;
						else lnkm+=val;
						setStorage("lnkm",lnkm);
					}
					var eles=$P("#nav_ctn .nav-item");
					for(var i=0,len=eles.length;i<len;i++){
						var it=eles[i];
						it.style.margin=lnkm+"px";
					}
					break;
				case "lnkr":
					if(flag){
						lnkr=val;
					}else{
						if(lnkr<0)lnkr=0;
						else if(lnkr>20)lnkr=20;
						else lnkr+=val;
						setStorage("lnkr",lnkr);
					}
					var eles=$P("#nav_ctn .nav-item");
					for(var i=0,len=eles.length;i<len;i++){
						var it=eles[i];
						it.style.borderRadius=lnkr+"px";
					}
					break;
				case "lnka":
					if(flag){
						lnka=val;
					}else{
						if(lnka<0)lnka=0;
						else if(lnka>wht/2)lnka=wht/2;
						else lnka+=val;
						setStorage("lnka",lnka);
					}
					var ele=$G("nav_ctn");
					ele.style.height=lnka+"px";
					break;
				case "lnkb":
					if(flag){
						lnkb=val;
					}else{
						if(lnkb<2)lnkb=2;
						else if(lnkb>99)lnkb=99;
						else lnkb+=val;
						setStorage("lnkb",lnkb);
					}
					var ele=$G("nav_ctn");
					ele.style.width=lnkb+"%";
					break;
			}
		}
		/**添加导入、导出功能**/
		function exportData(){
			$G("defpop_txts").value=JSON.stringify(urls);
		}		
		function importData(){
			$G("importBtn").focus();
			var sts = $G("defpop_txts").value;
			if(sts!=null){
				try{
					var uls=JSON.parse(sts);
					if(uls&&uls.length>0){
						urls=uls;
						setStorage("urls",JSON.stringify(urls));
						initLinks();
					}
				}catch(e){
					alert('导入数据无效！格式：[{"name":"***","url":"***"},...],详细错误：'+e.message);
				}
			}
		}
		var serw=75,lnkw=56,lnkf=12,serp,lnkv,lnkh=12,lnkm=6,lnka,lnkb=75,lnkr=8;
		var wht,wwt;
		var xind=0;
		window.onload=function(){
			initEvents();
			initLinks();
		}
	</script>
</head>
<body>
	<div id="ser_ctn" style="position:absolute;width:100%;left:0px;margin:0px;padding:0px;">
		<form action="http://m.so.com/s" target="_blank" method="get">
			<input name="ie" type="hidden" value="UTF-8"/>
			<input id="ser-inpt" name="q" type="text" class="ser-inpt" placeholder="">
		</form>
	</div>
	<div id="nav_ctn" style="position:absolute;width:75%;padding:0px;left:0px;overflow-y:auto;margin:0 12.5%;"></div>
	<!-- 长按空白处可调出设置菜单 -->
	<div id="ope_ctn" style="position:absolute;margin:0px;padding:0px;left:0px;top:0px;width:100%;height:220px;overflow:auto;background-color:#fafafa;display:none;box-shadow: 0px 0px 4px 3px #ddd;text-align:-webkit-center;text-align:center;">
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('serw',-1)">小</a>
			<a class="btn btn-combMidd" href="javaScript:">搜索宽度</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('serw',1)">大</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('serp',-1)">上</a>
			<a class="btn btn-combMidd" href="javaScript:">搜索位置</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('serp',1)">下</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkw',-1)">小</a>
			<a class="btn btn-combMidd" href="javaScript:">链接宽度</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkw',1)">大</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkf',-1)">小</a>
			<a class="btn btn-combMidd" href="javaScript:">链接字体</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkf',1)">大</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkv',-1)">上</a>
			<a class="btn btn-combMidd" href="javaScript:">链接位置</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkv',1)">下</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkh',-1)">左</a>
			<a class="btn btn-combMidd" href="javaScript:">链接位置</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkh',1)">右</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkm',-1)">小</a>
			<a class="btn btn-combMidd" href="javaScript:">链接间距</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkm',1)">大</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkr',-1)">小</a>
			<a class="btn btn-combMidd" href="javaScript:">链接圆角</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkr',1)">大</a>
		</div>
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnka',-1)">低</a>
			<a class="btn btn-combMidd" href="javaScript:">链接区域</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnka',1)">高</a>
		</div>		
		<div class="btn-comb" style="margin:10px;">
			<a class="btn btn-combLeft" href="javaScript:" onclick="onChangeStyle('lnkb',-1)">窄</a>
			<a class="btn btn-combMidd" href="javaScript:">链接区域</a>
			<a class="btn btn-combRight" href="javaScript:" onclick="onChangeStyle('lnkb',1)">宽</a>
		</div>		

		<textarea id="defpop_txts" class="exp-text" style="resize:none;width:96%;height:120px;"></textarea><br>
		<a class="btn" href="javaScript:" style="margin-bottom:4px;" onclick="exportData()">导出</a>
		<a id="importBtn" class="btn" href="javaScript:" style="margin-bottom:4px;" onclick="importData()">导入</a>	
	</div>
</body>
</html>